(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[219],{2331:(e,s,l)=>{"use strict";l.d(s,{DY:()=>t,Lx:()=>i,Og:()=>o,a4:()=>n});var a=l(7383),r=l(4475);let i=async(e,s)=>{try{let l=await r.A.post("/login",{email:e,password:s});return l.data.token&&a.A.set("token",l.data.token,{expires:1,sameSite:"strict"}),l.data}catch(e){throw console.error("Login error",e),e}},t=async e=>{try{return(await r.A.post("/register",e)).data}catch(e){throw console.error("register error",e),e}},o=async()=>{try{let e=await r.A.get("/verify-token");return console.log(e.data),e.data}catch(e){throw console.error("Get profile error",e),e}},n=async e=>{try{return(await r.A.put("/profile",e)).data}catch(e){throw console.error("register error",e),e}}},4136:(e,s,l)=>{Promise.resolve().then(l.bind(l,6974))},4416:(e,s,l)=>{"use strict";l.d(s,{A:()=>a});let a=(0,l(9946).A)("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]])},4616:(e,s,l)=>{"use strict";l.d(s,{A:()=>a});let a=(0,l(9946).A)("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]])},6974:(e,s,l)=>{"use strict";l.d(s,{default:()=>z});var a=l(5155),r=l(2115),i=l(5695),t=l(5594),o=l(1154),n=l(7550),c=l(4416);let d=(0,l(9946).A)("Camera",[["path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z",key:"1tc9qg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]]);var u=l(9869),p=l(4616),m=l(1978),h=l(350),x=l(7904),g=l(8552),y=l(6671),f=l(3800),j=l(466),v=l(2331),N=l(6874),b=l.n(N),k=l(6766),P=l(1107),w=l(4475);let A=["United States","Canada","United Kingdom","Australia","Germany","France","India","Japan","China","Brazil"],C=t.z.object({description:t.z.string().min(10,{message:"Description must be at least 10 characters"}),languages:t.z.array(t.z.string()).min(1,{message:"Add at least one language"}),skills:t.z.array(t.z.string()).min(1,{message:"Add at least one skill"}),location:t.z.object({country:t.z.string().min(1,{message:"Country is required"}),city:t.z.string().min(1,{message:"City is required"})}),profilePicture:t.z.string().optional()});function z(){var e,s,l,N;let z=(0,i.useRouter)(),S=(0,r.useRef)(null),[E,U]=(0,r.useState)(!1),[R,F]=(0,r.useState)(!0),[J,L]=(0,r.useState)(!1),[M,$]=(0,r.useState)({description:"",languages:[],skills:[],location:{country:"",city:""},profilePicture:""}),[D,_]=(0,r.useState)(""),[G,q]=(0,r.useState)(""),[B,H]=(0,r.useState)({description:"",languages:"",skills:"",location:{country:"",city:""},profilePicture:""});(0,r.useEffect)(()=>{(async()=>{try{F(!0);let l=await (0,v.Og)();if(l.user&&l.user.sellerProfile){var e,s;let{sellerProfile:a}=l.user;$({description:a.description||"",languages:a.languages||[],skills:a.skills||[],location:{country:(null===(e=a.location)||void 0===e?void 0:e.country)||"",city:(null===(s=a.location)||void 0===s?void 0:s.city)||""},profilePicture:l.user.profilePicture||""})}else if(l.user&&!l.user.isSeller){y.oR.error("Access Denied",{description:"You need to be a seller to edit this profile."}),z.push("/become-seller");return}}catch(e){console.error("Error loading profile:",e),y.oR.error("Load Error",{description:"Could not load your profile data."})}finally{F(!1)}})()},[z]);let O=async e=>{var s;let l=null===(s=e.target.files)||void 0===s?void 0:s[0];if(l){if(!["image/jpeg","image/jpg","image/png","image/webp"].includes(l.type)){y.oR.error("Invalid File Type",{description:"Please upload a JPEG, PNG, or WebP image."});return}if(l.size>5242880){y.oR.error("File Too Large",{description:"Please upload an image smaller than 5MB."});return}try{L(!0);let e=(await (0,P._X)(l)).file.url;$(s=>({...s,profilePicture:e})),console.log(sellerData),B.profilePicture&&H(e=>({...e,profilePicture:""})),y.oR.success("Photo Uploaded",{description:"Your profile photo has been uploaded successfully!"})}catch(e){console.error("Error uploading photo:",e),y.oR.error("Upload Failed",{description:"Could not upload your photo. Please try again."})}finally{L(!1),S.current&&(S.current.value="")}}},W=()=>{$(e=>({...e,profilePicture:""}))},Y=e=>{let{name:s,value:l}=e.target;if(s.includes(".")){let[e,a]=s.split(".");$(s=>({...s,[e]:{...s[e],[a]:l}})),B[e]&&B[e][a]&&H(s=>({...s,[e]:{...s[e],[a]:""}}))}else $(e=>({...e,[s]:l})),B[s]&&H(e=>({...e,[s]:""}))},T=e=>{$(s=>({...s,languages:s.languages.filter(s=>s!==e)}))},Z=e=>{$(s=>({...s,skills:s.skills.filter(s=>s!==e)}))},I=async e=>{e.preventDefault(),H({description:"",languages:"",skills:"",location:{country:"",city:""},profilePicture:""}),U(!0);try{C.parse(M);let e={isSeller:!0,sellerProfile:M,profilePicture:M.profilePicture};console.log(M),console.log(e);let s=await (0,v.a4)(e);s.user?(y.oR.success("Profile Updated",{description:"Your seller profile has been updated successfully!"}),z.push("/seller/profile")):y.oR.error("Update Failed",{description:s.message||"Please check your information."})}catch(e){if(e instanceof t.z.ZodError){let s={description:"",languages:"",skills:"",location:{country:"",city:""},profilePicture:""};e.errors.forEach(e=>{let l=e.path;2===l.length?s[l[0]][l[1]]=e.message:1===l.length&&(s[l[0]]=e.message)}),H(s)}else y.oR.error("Update Error",{description:"An error occurred while updating your profile. Please try again."}),console.error(e)}finally{U(!1)}};return R?(0,a.jsx)("div",{className:"container max-w-4xl py-10",children:(0,a.jsx)("div",{className:"flex items-center justify-center min-h-[400px]",children:(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)(o.A,{className:"h-6 w-6 animate-spin"}),(0,a.jsx)("span",{children:"Loading profile..."})]})})}):(0,a.jsxs)("div",{className:"container max-w-4xl py-10",children:[(0,a.jsx)("div",{className:"mb-6",children:(0,a.jsxs)(b(),{href:"/seller/profile",className:"flex items-center text-sm text-muted-foreground hover:text-primary transition-colors",children:[(0,a.jsx)(n.A,{className:"mr-2 h-4 w-4"}),"Back to Profile"]})}),(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h1",{className:"text-3xl font-bold tracking-tight",children:"Edit Profile"}),(0,a.jsx)("p",{className:"text-muted-foreground mt-2",children:"Update your seller profile information."})]}),(0,a.jsx)("div",{className:"grid gap-6",children:(0,a.jsx)("div",{className:"bg-white rounded-lg border shadow-sm p-6",children:(0,a.jsxs)("form",{onSubmit:I,className:"space-y-6",children:[(0,a.jsx)(f.Zp,{children:(0,a.jsx)(f.Wu,{className:"pt-6",children:(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsx)("h3",{className:"font-medium",children:"Profile Photo"}),(0,a.jsxs)("div",{className:"flex items-center space-x-6",children:[(0,a.jsx)("div",{className:"relative",children:M.profilePicture?(0,a.jsxs)("div",{className:"relative w-24 h-24 rounded-full overflow-hidden border-2 border-gray-200",children:[(0,a.jsx)(k.default,{src:w.H+M.profilePicture,alt:"Profile photo",fill:!0,className:"object-cover",sizes:"96px"}),(0,a.jsx)("button",{type:"button",onClick:W,disabled:E||J,className:"absolute -top-2 -right-2 bg-red-500 text-white rounded-full p-1 hover:bg-red-600 transition-colors",children:(0,a.jsx)(c.A,{className:"h-3 w-3"})})]}):(0,a.jsx)("div",{className:"w-24 h-24 rounded-full bg-gray-100 flex items-center justify-center border-2 border-dashed border-gray-300",children:(0,a.jsx)(d,{className:"h-8 w-8 text-gray-400"})})}),(0,a.jsxs)("div",{className:"flex-1 space-y-2",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)(m.$,{type:"button",variant:"outline",onClick:()=>{var e;return null===(e=S.current)||void 0===e?void 0:e.click()},disabled:E||J,className:"flex items-center space-x-2",children:J?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(o.A,{className:"h-4 w-4 animate-spin"}),(0,a.jsx)("span",{children:"Uploading..."})]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(u.A,{className:"h-4 w-4"}),(0,a.jsx)("span",{children:M.profilePicture?"Change Photo":"Upload Photo"})]})}),M.profilePicture&&(0,a.jsx)(m.$,{type:"button",variant:"ghost",onClick:W,disabled:E||J,size:"sm",className:"text-red-600 hover:text-red-700",children:"Remove"})]}),(0,a.jsx)("p",{className:"text-sm text-muted-foreground",children:"Upload a professional photo. Supports JPEG, PNG, WebP (max 5MB)"}),B.profilePicture&&(0,a.jsx)("p",{className:"text-sm text-red-500",role:"alert",children:B.profilePicture})]})]}),(0,a.jsx)("input",{ref:S,type:"file",accept:"image/jpeg,image/jpg,image/png,image/webp",onChange:O,className:"hidden"})]})})}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(x.J,{htmlFor:"description",children:"Professional Description"}),(0,a.jsx)(g.T,{id:"description",name:"description",placeholder:"Describe your services, expertise, and experience",value:M.description,onChange:Y,disabled:E,rows:4,className:B.description?"border-red-500":""}),B.description&&(0,a.jsx)("p",{className:"text-sm text-red-500",role:"alert",children:B.description})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(x.J,{children:"Languages"}),(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)(h.p,{placeholder:"Add a language you speak",value:D,onChange:e=>_(e.target.value),disabled:E,className:"flex-1"}),(0,a.jsx)(m.$,{type:"button",variant:"outline",size:"icon",onClick:()=>{D.trim()&&!M.languages.includes(D.trim())&&($(e=>({...e,languages:[...e.languages,D.trim()]})),_(""),B.languages&&H(e=>({...e,languages:""})))},disabled:E||!D.trim(),children:(0,a.jsx)(p.A,{className:"h-4 w-4"})})]}),(0,a.jsx)("div",{className:"flex flex-wrap gap-2 mt-2",children:M.languages.map((e,s)=>(0,a.jsxs)("div",{className:"flex items-center bg-gray-100 rounded-md px-2 py-1",children:[(0,a.jsx)("span",{className:"text-sm",children:e}),(0,a.jsx)(m.$,{type:"button",variant:"ghost",size:"sm",className:"h-5 w-5 p-0 ml-1",onClick:()=>T(e),disabled:E,children:(0,a.jsx)(c.A,{className:"h-3 w-3"})})]},s))}),B.languages&&(0,a.jsx)("p",{className:"text-sm text-red-500",role:"alert",children:B.languages})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(x.J,{children:"Skills"}),(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)(h.p,{placeholder:"Add a skill you offer",value:G,onChange:e=>q(e.target.value),disabled:E,className:"flex-1"}),(0,a.jsx)(m.$,{type:"button",variant:"outline",size:"icon",onClick:()=>{G.trim()&&!M.skills.includes(G.trim())&&($(e=>({...e,skills:[...e.skills,G.trim()]})),q(""),B.skills&&H(e=>({...e,skills:""})))},disabled:E||!G.trim(),children:(0,a.jsx)(p.A,{className:"h-4 w-4"})})]}),(0,a.jsx)("div",{className:"flex flex-wrap gap-2 mt-2",children:M.skills.map((e,s)=>(0,a.jsxs)("div",{className:"flex items-center bg-gray-100 rounded-md px-2 py-1",children:[(0,a.jsx)("span",{className:"text-sm",children:e}),(0,a.jsx)(m.$,{type:"button",variant:"ghost",size:"sm",className:"h-5 w-5 p-0 ml-1",onClick:()=>Z(e),disabled:E,children:(0,a.jsx)(c.A,{className:"h-3 w-3"})})]},s))}),B.skills&&(0,a.jsx)("p",{className:"text-sm text-red-500",role:"alert",children:B.skills})]}),(0,a.jsx)(f.Zp,{children:(0,a.jsx)(f.Wu,{className:"pt-6",children:(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsx)("h3",{className:"font-medium",children:"Location"}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(x.J,{htmlFor:"country",children:"Country"}),(0,a.jsxs)(j.l6,{disabled:E,value:M.location.country,onValueChange:e=>{$(s=>({...s,location:{...s.location,country:e}})),B.location&&B.location.country&&H(e=>({...e,location:{...e.location,country:""}}))},children:[(0,a.jsx)(j.bq,{id:"country",className:(null===(e=B.location)||void 0===e?void 0:e.country)?"border-red-500":"",children:(0,a.jsx)(j.yv,{placeholder:"Select a country"})}),(0,a.jsx)(j.gC,{children:A.map(e=>(0,a.jsx)(j.eb,{value:e,children:e},e))})]}),(null===(s=B.location)||void 0===s?void 0:s.country)&&(0,a.jsx)("p",{className:"text-sm text-red-500",role:"alert",children:B.location.country})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(x.J,{htmlFor:"city",children:"City"}),(0,a.jsx)(h.p,{id:"city",name:"location.city",placeholder:"Enter your city",value:M.location.city,onChange:Y,disabled:E,className:(null===(l=B.location)||void 0===l?void 0:l.city)?"border-red-500":""}),(null===(N=B.location)||void 0===N?void 0:N.city)&&(0,a.jsx)("p",{className:"text-sm text-red-500",role:"alert",children:B.location.city})]})]})})}),(0,a.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,a.jsx)(m.$,{type:"submit",disabled:E||J,"aria-busy":E,children:E?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(o.A,{className:"mr-2 h-4 w-4 animate-spin"}),"Updating..."]}):"Update Profile"}),(0,a.jsx)(m.$,{type:"button",variant:"outline",onClick:()=>z.push("/seller/profile"),disabled:E||J,children:"Cancel"})]})]})})})]})]})}},7550:(e,s,l)=>{"use strict";l.d(s,{A:()=>a});let a=(0,l(9946).A)("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]])},7904:(e,s,l)=>{"use strict";l.d(s,{J:()=>t});var a=l(5155);l(2115);var r=l(4265),i=l(9433);function t(e){let{className:s,...l}=e;return(0,a.jsx)(r.b,{"data-slot":"label",className:(0,i.cn)("flex items-center gap-2 text-sm leading-none font-medium select-none group-data-[disabled=true]:pointer-events-none group-data-[disabled=true]:opacity-50 peer-disabled:cursor-not-allowed peer-disabled:opacity-50",s),...l})}},9869:(e,s,l)=>{"use strict";l.d(s,{A:()=>a});let a=(0,l(9946).A)("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]])}},e=>{var s=s=>e(e.s=s);e.O(0,[159,671,392,764,559,766,631,908,441,684,358],()=>s(4136)),_N_E=e.O()}]);